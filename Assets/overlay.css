* { margin: 0; padding: 0; box-sizing: border-box; }
:root{
  --primary:#6366f1; --primary-dark:#4f46e5;
  --bg-main:rgba(15,23,42,.95); --bg-secondary:rgba(30,41,59,.8); --bg-tertiary:rgba(51,65,85,.6);
  --text-primary:#f1f5f9; --text-secondary:#94a3b8; --text-dim:#64748b;
  --accent:#10b981; --danger:#ef4444; --warning:#f59e0b;
}
body{ font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  background:transparent; color:var(--text-primary); user-select:none; }

/* ---------- HUD (affiché en jeu) ---------- */
.hud{
  position:fixed; bottom:20px; left:50%; transform:translateX(-50%) translateY(10px) scale(.98);
  width: 460px; display:flex; align-items:center; gap:12px;
  padding:10px 14px; border-radius:14px;
  background:rgba(15,23,42,.40); backdrop-filter: blur(8px);
  border:1px solid rgba(148,163,184,.18);
  box-shadow: 0 12px 30px -10px rgba(0,0,0,.5);
  opacity:0; pointer-events:none;
  transition:opacity .25s ease, transform .25s ease;
}
.hud .hud-art{
  width:42px; height:42px; border-radius:8px; display:flex; align-items:center; justify-content:center;
  background:linear-gradient(135deg, var(--primary), var(--accent)); font-size:22px; flex:0 0 auto;
}
.hud .hud-center{ flex:1; min-width: 0; }
.hud .hud-title{
  font-size:14px; font-weight:600; color:var(--text-primary);
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap; line-height:1.2; margin-bottom:6px;
}
.hud .hud-progress{ width:100%; height:4px; background:rgba(148,163,184,.18); border-radius:3px; overflow:hidden; }
.hud .hud-progress-fill{ height:100%; width:0%; background:linear-gradient(90deg, var(--primary), var(--accent)); }
.hud .hud-time{ font-size:12px; color:var(--text-secondary); flex:0 0 auto; margin-left:6px; }

/* État d’affichage */
body.hud-only .hud{ opacity:1; transform:translateX(-50%) translateY(0) scale(1); }
body.panel-open .hud{ opacity:0; transform:translateX(-50%) translateY(10px) scale(.98); }

/* ---------- Panneau complet ---------- */
.player-container{
  position:fixed; bottom:20px; left:50%; transform:translateX(-50%) translateY(12px) scale(.98);
  width:380px; background:var(--bg-main); border-radius:20px; padding:20px;
  backdrop-filter: blur(20px); border:1px solid rgba(148,163,184,.1);
  box-shadow:0 25px 50px -12px rgba(0,0,0,.5);
  opacity:0; visibility:hidden; pointer-events:none;
  transition:opacity .25s ease, transform .25s ease, visibility 0s linear .25s;
}
body.panel-open .player-container{
  opacity:1; transform:translateX(-50%) translateY(0) scale(1); visibility:visible; pointer-events:auto;
  transition:opacity .25s ease, transform .25s ease;
}
.player-content{}

/* Add URL */
.add-url-container{ margin-bottom:15px; position:relative; }
.add-url-input{
  width:100%; padding:12px 45px 12px 15px; background:var(--bg-secondary);
  border:2px solid transparent; border-radius:12px; color:var(--text-primary); font-size:14px;
  transition: all .2s;
}
.add-url-input:focus{ outline:none; border-color:var(--primary); background:var(--bg-tertiary);}
.add-url-btn{
  position:absolute; right:5px; top:50%; transform:translateY(-50%);
  width:35px; height:35px; border-radius:8px; background:var(--primary); border:none; color:#fff; cursor:pointer;
  display:flex; align-items:center; justify-content:center; transition:all .2s;
}
.add-url-btn:hover{ background:var(--primary-dark); transform:translateY(-50%) scale(1.1); }

/* Track info */
.track-info{ text-align:center; margin-bottom:20px; }
.track-artwork{
  width:120px; height:120px; margin:0 auto 15px; border-radius:12px;
  background:linear-gradient(135deg,var(--primary),var(--accent));
  display:flex; align-items:center; justify-content:center; font-size:48px; animation:pulse 2s infinite;
}
@keyframes pulse{0%,100%{transform:scale(1);}50%{transform:scale(1.05);} }
.track-title{ font-size:18px; font-weight:700; color:var(--text-primary); margin-bottom:5px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.track-artist{ font-size:14px; color:var(--text-secondary); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Progress panel */
.progress-container{ margin-bottom:20px; }
.progress-bar{ width:100%; height:6px; background:var(--bg-secondary); border-radius:3px; overflow:hidden; position:relative; }
.progress-fill{ height:100%; background:linear-gradient(90deg,var(--primary),var(--accent)); border-radius:3px; width:0%; transition:width .25s; }
.progress-time{ display:flex; justify-content:space-between; margin-top:8px; font-size:11px; color:var(--text-dim); }

/* Controls (new look) */
.controls-main {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 14px;
  margin-bottom: 20px;
}

.control-btn {
  width: 46px;
  height: 46px;
  border: 1px solid rgba(148,163,184,0.12);
  border-radius: 14px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
  box-shadow:
          0 6px 18px -8px rgba(0,0,0,.55),
          inset 0 0 0 0 rgba(255,255,255,0);
}

.control-btn .icon {
  width: 22px;
  height: 22px;
  display: block;
}

.control-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  background: var(--bg-tertiary);
  box-shadow:
          0 10px 24px -10px rgba(0,0,0,.6),
          inset 0 0 0 0 rgba(255,255,255,0);
}

.control-btn:active:not(:disabled) {
  transform: translateY(0);
  box-shadow:
          0 4px 10px -6px rgba(0,0,0,.6),
          inset 0 0 0 0 rgba(255,255,255,0);
}

.control-btn:disabled {
  opacity: .4;
  cursor: not-allowed;
}

/* Primary (Play/Pause) — big glowing circle */
.control-btn.primary {
  width: 58px;
  height: 58px;
  border-radius: 50%;
  border: none;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: #fff;
  box-shadow:
          0 12px 28px -12px rgba(79,70,229,.55),
          0 0 0 6px rgba(79,70,229,.10);
}

.control-btn.primary:hover:not(:disabled) {
  transform: translateY(-1px) scale(1.03);
  box-shadow:
          0 16px 36px -14px rgba(79,70,229,.62),
          0 0 0 8px rgba(79,70,229,.12);
}

.control-btn.primary.playing {
  /* subtle alternate glow while playing */
  box-shadow:
          0 14px 34px -12px rgba(16,185,129,.45),
          0 0 0 8px rgba(16,185,129,.12);
}

/* Optional: highlight when repeat is active */
#repeatBtn.active {
  border-color: rgba(16,185,129,.35);
  box-shadow: 0 0 0 6px rgba(16,185,129,.10);
  color: var(--accent);
}


/* Queue */
.queue-container{ max-height:200px; overflow-y:auto; margin-top:15px; padding-top:15px; border-top:1px solid rgba(148,163,184,.1); }
.queue-title{ font-size:12px; font-weight:600; color:var(--text-secondary); margin-bottom:10px; text-transform:uppercase; letter-spacing:.5px; }
.queue-item{ display:flex; align-items:center; padding:8px; border-radius:8px; margin-bottom:5px; cursor:pointer; transition:all .2s; }
.queue-item:hover{ background:var(--bg-secondary); }
.queue-item.playing{ background:var(--bg-tertiary); border-left:3px solid var(--accent); }
.queue-number{ width:20px; font-size:11px; color:var(--text-dim); }
.queue-info{ flex:1; overflow:hidden; }
.queue-track{ font-size:13px; color:var(--text-primary); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.queue-duration{ font-size:11px; color:var(--text-dim); }
.queue-remove{ width:20px; height:20px; border-radius:50%; background:transparent; border:none; color:var(--text-dim); cursor:pointer; opacity:0; transition:all .2s; }
.queue-item:hover .queue-remove{ opacity:1; }
.queue-remove:hover{ background:var(--danger); color:#fff; }

/* Suggestions */
.suggestions-container{ position:absolute; top:100%; left:0; right:0; background:var(--bg-main); border-radius:12px; margin-top:5px; padding:8px; box-shadow:0 10px 25px -5px rgba(0,0,0,.3); z-index:100; max-height:180px; overflow-y:auto;}
.suggestions-container.hidden{ display:none; }
.suggestion-item{ padding:10px; border-radius:8px; cursor:pointer; transition:all .2s; font-size:13px; }
.suggestion-item:hover{ background:var(--bg-secondary); }
.suggestion-title{ color:var(--text-primary); margin-bottom:3px; }
.suggestion-info{ font-size:11px; color:var(--text-dim); }

/* Settings button */
.settings-toggle{
  position:absolute;
  top: -10px; right: -10px;
  width:36px; height:36px;
  border-radius:50%;
  background:var(--bg-secondary);
  border:1px solid rgba(148,163,184,.1);
  color:var(--text-secondary);
  display:flex; align-items:center; justify-content:center;
  transition:all .3s;
  z-index:5;
}

.settings-toggle:hover{ background:var(--primary); color:#fff; transform:rotate(90deg); }

/* Config panel */
.config-panel{
  position:fixed; top:10px; right:10px; background:var(--bg-main); border-radius:12px; padding:15px; width:400px;
  backdrop-filter: blur(20px); border:1px solid rgba(148,163,184,.1); box-shadow:0 20px 25px -5px rgba(0,0,0,.3);
  transition:all .3s cubic-bezier(.4,0,.2,1); z-index:1000;
}
.config-panel.hidden{ transform:translateX(420px); opacity:0; }
.config-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; }
.config-title{ font-size:14px; font-weight:600; color:var(--text-secondary); }
.config-close{ width:24px; height:24px; border-radius:50%; background:var(--bg-tertiary); border:none; color:var(--text-secondary);
  cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all .2s; }
.config-close:hover{ background:var(--danger); color:#fff; }
.config-input{ width:100%; padding:10px 12px; background:var(--bg-secondary); border:1px solid rgba(148,163,184,.1);
  border-radius:8px; color:var(--text-primary); font-size:13px; margin-bottom:10px; transition:all .2s; }
.config-input:focus{ outline:none; border-color:var(--primary); background:var(--bg-tertiary); }
.config-save{ width:100%; padding:10px; background:var(--primary); border:none; border-radius:8px; color:#fff; font-weight:600; cursor:pointer; transition:all .2s; }
.config-save:hover{ background:var(--primary-dark); transform:translateY(-1px); }
.status-message{ margin-top:10px; padding:8px; border-radius:6px; font-size:11px; text-align:center; transition:all .3s; }
.status-success{ background:rgba(16,185,129,.1); color:var(--accent); border:1px solid rgba(16,185,129,.2); }
.status-error{ background:rgba(239,68,68,.1); color:var(--danger); border:1px solid rgba(239,68,68,.2); }

/* Scrollbar */
::-webkit-scrollbar{ width:6px; }
::-webkit-scrollbar-track{ background:var(--bg-secondary); border-radius:3px; }
::-webkit-scrollbar-thumb{ background:var(--bg-tertiary); border-radius:3px; }
::-webkit-scrollbar-thumb:hover{ background:var(--primary); }
